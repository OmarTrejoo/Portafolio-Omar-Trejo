---
import type { PersonalInfo } from "../types";
import { siteConfig } from "../data/site";
import BackgroundEffects from "./ui/BackgroundEffects.astro";
import SectionBackground from "./ui/SectionBackground.astro";
import SectionTitle from "./ui/SectionTitle.astro";
import Button from "./ui/Button.astro";

interface Props {
  personalInfo: PersonalInfo;
  lang: 'es' | 'en';
}

const { personalInfo, lang } = Astro.props;

const labels = {
  aboutMe: lang === 'es' ? 'Sobre Mí' : 'About Me', 
  whoAmI: lang === 'es' ? 'Quién soy' : 'Who am I',
  downloadCV: lang === 'es' ? 'Descargar CV' : 'Download CV'
};
---

<section
	id="sobre-mi"
	class="min-h-screen bg-slate-900 text-slate-100 border-t border-slate-800/50 relative overflow-hidden flex items-center"
>
	<BackgroundEffects />
	<SectionBackground variant="light" gradientPosition="top" />

	<div
		class="container mx-auto px-4 sm:px-6 lg:px-8 pt-8 md:pt-12 pb-16 md:pb-20 relative z-10"
	>
		<div class="max-w-4xl mx-auto">

			<SectionTitle title={labels.aboutMe} align="center" />


			<div class="grid md:grid-cols-3 gap-6">

				<div 
					class="md:col-span-2 animate-on-scroll"
					data-animate
					style="animation-delay: 0.2s;"
				>
					<div class="group relative bg-slate-950 rounded-2xl p-8 h-full border border-slate-800/50 shadow-lg shadow-emerald-500/5 hover:scale-[1.02] transition-all duration-300 overflow-hidden">

						<div class="absolute top-0 left-0 w-1.5 h-full bg-gradient-to-b from-emerald-400/80 via-teal-400/60 to-emerald-500/40 rounded-tl-2xl rounded-bl-2xl"></div>
						
						<div class="flex items-start gap-4 mb-6">
							<div>
								<h3 class="text-xl font-bold text-white mb-2 group-hover:text-emerald-400 transition-colors">{labels.whoAmI}</h3>
								<div class="h-0.5 w-16 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full"></div>
							</div>
						</div>
						<p class="text-base text-slate-300 leading-relaxed">
							{personalInfo.description}
						</p>
					</div>
				</div>


				<div 
					class="flex flex-col gap-6 h-full animate-on-scroll"
					data-animate
					style="animation-delay: 0.3s;"
				>

					<div class="group relative bg-slate-950 rounded-2xl p-8 border border-slate-800/50 shadow-lg shadow-emerald-500/5 hover:scale-[1.02] transition-all duration-300 overflow-hidden flex-1 flex items-center justify-center">

						<div class="absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-emerald-400/60 via-teal-400/60 to-emerald-400/60 rounded-tr-2xl rounded-tl-2xl"></div>
						

						<div class="relative w-52 h-52 rounded-2xl overflow-hidden border-2 border-emerald-500/20 shadow-2xl group-hover:border-emerald-500/40 transition-all duration-300">
							<img 
								src="/referencias img/fotoperfil.jpg"
								alt="Omar Trejo"
								class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
							/>
						</div>
					</div>


					<div class="grid grid-cols-2 gap-4">

						<Button 
							href="/cv-2025.pdf" 
							variant="secondary" 
							target="_blank" 
							class="w-full !px-3 !py-4 text-xs sm:text-sm"
						>
							<span class="font-bold">Ver CV</span>
						</Button>


						<Button 
							href="/cv-english.pdf" 
							variant="secondary" 
							target="_blank" 
							class="w-full !px-3 !py-4 text-xs sm:text-sm"
						>
							<span class="font-bold text-teal-400">View CV</span>
						</Button>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<style>
	.animate-on-scroll {
		opacity: 0;
		transform: translateY(30px);
		transition: opacity 0.8s ease-out, transform 0.8s ease-out;
	}

	.animate-on-scroll.visible {
		opacity: 1;
		transform: translateY(0);
	}
</style>

<script>
	function initAboutAnimations() {
		const observer = new IntersectionObserver(
			(entries) => {
				entries.forEach((entry) => {
					if (entry.isIntersecting) {
						entry.target.classList.add('visible');
					}
				});
			},
			{
				threshold: 0.1,
				rootMargin: '0px 0px -100px 0px'
			}
		);

		const animatedElements = document.querySelectorAll('[data-animate]');
		animatedElements.forEach((el) => observer.observe(el));
	}

	document.addEventListener('DOMContentLoaded', initAboutAnimations);
	document.addEventListener('astro:page-load', initAboutAnimations);
</script>
